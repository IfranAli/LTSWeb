<div class="custom-form">
  <div
    [class.hideHeader]="dialogAction == 'Edit Finance'"
  >
    <h1> {{ dialogAction }}</h1>

    <mat-tab-group [(selectedIndex)]="selectedTab">
      <mat-tab label="Add">
        <form [formGroup]="addFinanceForm">
          <label>Name</label>
          <input [formControl]="addFinanceForm.controls.name" type="text">

          <label>Date</label>
          <div class="right-icon">
            <input [matDatepicker]="picker" [formControl]="addFinanceForm.controls.date">
            <span>
              <mat-datepicker-toggle [for]="picker"></mat-datepicker-toggle>
              <mat-datepicker #picker></mat-datepicker>
            </span>
          </div>

          <label>Amount</label>
          <input [formControl]="addFinanceForm.controls.amount">

          <label>Category</label>
          <select [formControl]="addFinanceForm.controls.categoryType">
            <option [value]="category.key" *ngFor="let category of data.categories | keyvalue">
              {{ category.value }}
            </option>
          </select>

        </form>
      </mat-tab>

      <mat-tab
        *ngIf="dialogAction == 'Add Finance'"
        label="Import">
        <form [formGroup]="bulkImportForm">
          <label>Input</label>
          <textarea [formControl]="bulkImportForm.controls.input" type="text" style="min-height: 200px">
          </textarea>

          <label>Date</label>
          <div class="right-icon">
            <input [matDatepicker]="pickerBulk" [formControl]="bulkImportForm.controls.date">
            <span>
              <mat-datepicker-toggle [for]="pickerBulk"></mat-datepicker-toggle>
              <mat-datepicker #pickerBulk></mat-datepicker>
            </span>
          </div>
        </form>

        <div class="parsed-display scrollable-div">
          <div *ngFor="let v of test$ | async">
            {{ v.date}}
            {{ '$' + v.amount}}
            {{ v.name }}
          </div>
        </div>
      </mat-tab>
    </mat-tab-group>
  </div>

  <div class="actions">
    <button (click)="this.dialogRef.close()">Cancel</button>

    <div>
      <button
        *ngIf="dialogAction == 'Edit Finance'"
        class='danger' (click)="deleteFinance()">Delete
      </button>

      <button class='primary' (click)="addFinance()">
        {{ dialogAction == 'Add Finance' ? 'Create' : 'Update' }}
      </button>
    </div>
  </div>
</div>
